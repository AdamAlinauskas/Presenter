@model Domain.Conversation

@{
    Layout = "~/Views/Conversation/Layout.cshtml";
}

<nav class="navbar is-dark">
    <div class="navbar-item">
        <div class="navbar-link" style="background:inherit">
            <div style="color: whitesmoke">Logged in as @User.Identity.Name</div>
        </div>
    </div>
</nav>

<div class="columns" style="margin:0; height:calc(100vh - 56px)">
    <section class="column is-two-thirds" style="border-right: 1px solid lightgray">
        <h1 class="title" style="margin: 60px 0 20px 0">@Model.Topic</h1>
        <p>Presentation content goes here</p>
    </section>

    <div class="column">
        <section id="messages" class="mt-messages"></section>
        <form id="add-message" class="columns is-mobile">
            <input type="hidden" name="conversationId" value="@Model.Id" />
            <div class="column">
                <input id="message" name="message" placeholder="Message" class="input" autocomplete="off" />
            </div>
            <div class="column is-narrow">
                <input type="submit" value="Send" class="button is-primary"/>
            </div>
        </form>
    </div>
</div>

<template id="message-template">
    <div class="media is-info mt-media">
        <figure class="media-left">
            <p class="image is-32x32">
            <img src="" class="mt-author-picture">
            </p>
        </figure>
        <div class="media-content">
            <strong class="mt-author"></strong><br/>
            <div class="mt-message"></div>
            <small><a class="mt-reply">Reply</a></small>
            <form class="columns is-mobile mt-reply-form is-hidden">
                <input type="hidden" name="conversationId" value="@Model.Id" />
                <input type="hidden" name="messageId" class="mt-message-id"/>
                <div class="column">
                    <input name="message" placeholder="Message" class="input mt-message-input" autocomplete="off" />
                </div>
                <div class="column is-narrow">
                    <input type="submit" value="Send" class="button is-primary"/>
                </div>
            </form>
        </div>
    </div>
</template>

<script type="text/javascript">
    window.conversationId = @Model.Id
</script>
<script type="text/javascript" src="/scripts/conversation/conversation.js"></script>